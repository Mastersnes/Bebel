define(["jquery","underscore","app/utils/utils","app/data/items"],function(f,g,h,c){return function(d,e){this.init=function(a,b){this.el="";this.parent=a;this.Textes=a.Textes;this.saveManager=a.saveManager;this.options=this.saveManager.options();this.mediatheque=a.mediatheque;this.name=b;this.state=null;this.data=c.get(b)};this.click=function(){switch(this.data.type){case "arme":this.attaqueCase();break;case "bouclier":this.bouclierCase();break;case "magie":case "conso":this.data.offensif?this.attaqueCase():
this.useOn(this.parent.player)}};this.attaqueCase=function(){var a=this.parent.aliveMonsters();this.data.multicible?this.useOn(a):1==a.length&&this.options.cibleUnique?this.useOn(a[0]):this.parent.setPending(this)};this.bouclierCase=function(){this.parent.closePending();this.state="used";this.parent.monstersAttaque(this.data.sound)};this.useOn=function(a){Array.isArray(a)||(a=[a]);this.parent.closePending();this.state="used";var b=this.parent.player;switch(this.data.type){case "arme":b.attaque(a,
!0,this.data);break;case "magie":b.spell(this.data.name,a,this.data);break;case "conso":b.use(this.data.name,a);break;default:console.log("Erreur - l'action est inconnue",this.data,a)}b.etatsManager.infligeEtats()};this.init(d,e)}});