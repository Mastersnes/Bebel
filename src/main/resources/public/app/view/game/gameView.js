define("jquery underscore app/utils/utils app/utils/popupUtils text!app/template/game/game.html app/manager/recompenseManager app/manager/playerManager app/view/game/uiView app/view/game/histoireView app/view/game/fightView app/view/game/jeuGardeView app/view/game/quetesView app/view/game/boutiqueView app/view/game/glossaireView app/view/game/inventaireView app/view/game/endView".split(" "),function(c,f,g,h,k,l,m,n,p,q,r,s,t,u,v,w){return function(x,y){this.init=function(a,b){this.el=c("#app");this.parent=
a;this.Textes=a.Textes;this.mediatheque=a.mediatheque;this.kongregateUtils=a.kongregateUtils;this.endGame=this.pause=!1;this.easterEggs=0;this.render();a.scene.resize();this.saveManager=a.saveManager;this.recompenseManager=new l(this);this.recompenseManager.reloadSuccess();this.playerManager=new m(this);this.uiView=new n(this);this.uiView.render();this.didacticiel=b;this.histoireView=new p(this,b);this.fightView=new q(this);this.jeuGardeView=new r(this);this.boutiqueView=new t(this);this.quetesView=
new s(this);this.glossaireView=new u(this);this.inventaireView=new v(this);this.endView=new w(this);this.alreadyLoop||(this.alreadyLoop=!0,this.makeEvents(),this.loop(),this.hardLoop(),this.renderLoop())};this.resetGame=function(){this.endGame=!0;this.parent.render()};this.render=function(a){f.templateSettings.variable="data";a=f.template(k);this.el.html(a({text:this.Textes}));document.fullscreenElement&&null!==document.fullscreenElement||document.webkitFullscreenElement&&null!==document.webkitFullscreenElement||
document.mozFullScreenElement&&null!==document.mozFullScreenElement||document.msFullscreenElement&&null!==document.msFullscreenElement?c("fullscreen").addClass("exit"):c("fullscreen").removeClass("exit");this.refreshSound()};this.hardLoop=function(){if(!this.endGame){this.didacticiel||this.saveManager.saveInCloud();var a=this;setTimeout(function(){a.hardLoop()},5E3)}};this.loop=function(){if(!this.endGame){this.pause||this.didacticiel||this.saveManager.saveInSession();var a=this;setTimeout(function(){a.loop()},
1E3)}};this.renderLoop=function(){var a=this;this.endGame||(this.pause||(this.uiView.loop(this),this.fightView.loop(this),this.jeuGardeView.loop(this),this.boutiqueView.loop(this),this.quetesView.loop(this),this.inventaireView.loop(this),this.playerManager.showNextAmount(),0==this.easterEggs&&(this.el.find("loupe").removeAttr("style"),this.el.find("loupe").removeClass("easterEggs"))),setTimeout(function(){window.stopLoop||a.renderLoop()},100))};this.refreshSound=function(){this.mediatheque.isMute("sound")?
this.el.find("son#sound").addClass("mute"):this.el.find("son#sound").removeClass("mute");this.mediatheque.isMute("music")?this.el.find("son#music").addClass("mute"):this.el.find("son#music").removeClass("mute")};this.onResize=function(){};this.gameOver=function(a){this.playerManager.data.checkpoint=this.playerManager.data.lieu;a=this.saveManager.load("GameOver");this.saveManager.save("GameOver",a+1);this.recompenseManager.addSuccess("GameOver",a+1);this.histoireView.go("die");this.saveManager.saveInSession()};
this.fight=function(a,b,c,d,e){this.fightView.fight(a,b,c,d,e)};this.boutique=function(a,b,c){this.boutiqueView.open(a,b,c)};this.glossaire=function(a,b){this.mediatheque.playSound("ui/openGlossaire.wav");this.glossaireView.show(a,b)};this.jeuGarde=function(a,b,c,d,e){this.jeuGardeView.launch(a,b,c,d,e)};this.quetes=function(a){this.quetesView.open(a)};this.makeEvents=function(){var a=this;console.log("Mon premier a un gout de fraise.");this.uiView.el.find("fiole.life").click(function(b){0==a.easterEggs?
(console.log("Mon second a de la pratique."),a.easterEggs++):3==a.easterEggs?(console.log("Mon cinquieme est adroit(e)."),a.easterEggs++):a.easterEggs=0});this.uiView.el.find("level picture").click(function(b){1==a.easterEggs?(console.log("Mon troisieme ne fait pas le bonheur."),a.easterEggs++):a.easterEggs=0});this.uiView.el.find("gold").click(function(b){2==a.easterEggs?(console.log("Mon quatrieme aurait voulu etre premier."),a.easterEggs++):a.easterEggs=0});c("body").contextmenu(function(){4==
a.easterEggs?(console.log("Je ne verrais rien sans mon dernier."),a.easterEggs++):a.easterEggs=0;return!1});this.el.find("loupe hitbox").hover(function(b){5<a.easterEggs||a.el.find("loupe").addClass("hover")},function(b){5<a.easterEggs||a.el.find("loupe").removeClass("hover")});this.el.find("loupe hitbox").click(function(b){5==a.easterEggs?(a.easterEggs=6,console.log("Bravo ! Vous l'avez \x3d) !"),a.recompenseManager.addSuccess("EasterEggs")):(5>a.easterEggs&&(a.mediatheque.playSound("ui/openGlossaire.wav"),
a.glossaireView.list()),a.easterEggs=0)});this.el.find("carnet hitbox").hover(function(b){a.el.find("carnet").addClass("hover")},function(b){a.el.find("carnet").removeClass("hover")});this.el.find("carnet hitbox").click(function(b){a.inventaireView.show()});c("body").mousemove(function(b){if(6==a.easterEggs){b=a.el.find("loupe");b.addClass("easterEggs");var z=event.clientX-c(".scene").position().left-b.width()/2,d=event.clientY-b.height()/2;b.css({left:z,top:d})}});c("fullscreen").click(function(){g.fullscreen()?
c("fullscreen").removeClass("exit"):c("fullscreen").addClass("exit");a.onResize()});this.el.find("son#sound").click(function(b){a.mediatheque.mute("sound");a.refreshSound()});this.el.find("son#music").click(function(b){a.mediatheque.mute("music");a.refreshSound()})};this.alertPopup=function(a,b,c){h.alert(this.Textes,a,"suivant",function(){b&&b()},c)};this.init(x,y)}});